<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title></title>
		<link rel="stylesheet" href="css/scan.css" />
		<script type="text/javascript">
			document.addEventListener('plusready', function() {
				//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。"

			});
		</script>
	</head>

	<body>
		<!--<video id="video" width="320px" height="300px"></video>
		<canvas id="canvas" width="320px" height="300px"></canvas>-->

		<!--<button id="button" onclick="cameraClick()">开始拍照</button>
		<button id="button" onclick="stopCamera()">暂停</button>
		<button id="button" onclick="continueCamera()">继续</button>
		<button id="button" onclick="getPicture()">拍照</button>-->
	</body>
	<script type="text/javascript" src="js/scan.js"></script>
	<script>
		let scan = new Scan({
			picture_type: 1
		});

		function error(error) {
			console.log('访问用户媒体设备失败${error.name}, ${error.message}');
		}

		function success(stream) {
			//兼容webkit核心浏览器
			var CompatibleURL = window.URL || window.webkitURL;
			//将视频流设置为video元素的源
			//video.src = CompatibleURL.createObjectURL(stream);
			scan.load(stream);

		}

		function cameraClick() {
			scan.start({
				video: {
					width: 480,
					height: 320
				}
			});
		}

		function stopCamera() {
			scan.pause();
		}

		function continueCamera() {
			scan.continue();
		}

		function getCamera() {
			scan.continue();
		}

		function getPicture() {
			scan.pause();
			scan.getPicture();
		}
	</script>

</html>